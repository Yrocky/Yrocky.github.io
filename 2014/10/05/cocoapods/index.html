<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>使用CocoaPods的简便步骤 | Rocky&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="当你开发iOS应用时，会经常使用到很多第三方开源类库，比如JSONKit、FMDB、AFNetWorking等等。可能某个类库又用到其他类库，所以要使用它，必须得另外下载其他类库，而其他类库又用到其他类库，“子子孙孙无穷尽也”，这也许是比较特殊的情况。手动一个个去下载所需类库十分麻烦。另外一种常见情况是，你项目中用到的类库有更新，你必须得重新下载新版本，重新加入到项目中，十分麻烦。如果能有什么工具">
<meta property="og:type" content="article">
<meta property="og:title" content="使用CocoaPods的简便步骤">
<meta property="og:url" content="http://yoursite.com/2014/10/05/cocoapods/index.html">
<meta property="og:site_name" content="Rocky's blog">
<meta property="og:description" content="当你开发iOS应用时，会经常使用到很多第三方开源类库，比如JSONKit、FMDB、AFNetWorking等等。可能某个类库又用到其他类库，所以要使用它，必须得另外下载其他类库，而其他类库又用到其他类库，“子子孙孙无穷尽也”，这也许是比较特殊的情况。手动一个个去下载所需类库十分麻烦。另外一种常见情况是，你项目中用到的类库有更新，你必须得重新下载新版本，重新加入到项目中，十分麻烦。如果能有什么工具">
<meta property="og:image" content="http://yoursite.com/2014/10/05/cocoapods/cocoapod.png">
<meta property="og:updated_time" content="2016-03-17T13:26:52.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用CocoaPods的简便步骤">
<meta name="twitter:description" content="当你开发iOS应用时，会经常使用到很多第三方开源类库，比如JSONKit、FMDB、AFNetWorking等等。可能某个类库又用到其他类库，所以要使用它，必须得另外下载其他类库，而其他类库又用到其他类库，“子子孙孙无穷尽也”，这也许是比较特殊的情况。手动一个个去下载所需类库十分麻烦。另外一种常见情况是，你项目中用到的类库有更新，你必须得重新下载新版本，重新加入到项目中，十分麻烦。如果能有什么工具">
  
    <link rel="alternative" href="/atom.xml" title="Rocky&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="favicon.ico">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      
        <h1 id="logo-image">
          <a href="/" id="logo-image-a">
            <img border="0" src="http://tp4.sinaimg.cn/2055300355/180/5701319722/2" />
          </a>
        </h1>
      
      <h1 id="logo-wrap">
        <p id="logo">Rocky&#39;s blog</>
      </h1>
    </div>
    <div id="header-inner" class="inner">
      
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>

    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-cocoapods" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/05/cocoapods/" class="article-date">
  <time datetime="2014-10-05T15:32:12.000Z" itemprop="datePublished">2014-10-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      使用CocoaPods的简便步骤
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>当你开发iOS应用时，会经常使用到很多第三方开源类库，比如JSONKit、FMDB、<a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="external">AFNetWorking</a>等等。可能某个类库又用到其他类库，所以要使用它，必须得另外下载其他类库，而其他类库又用到其他类库，“子子孙孙无穷尽也”，这也许是比较特殊的情况。手动一个个去下载所需类库十分麻烦。另外一种常见情况是，你项目中用到的类库有更新，你必须得重新下载新版本，重新加入到项目中，十分麻烦。如果能有什么工具能解决这些恼人的问题，那将“善莫大焉”。所以，你需要</p>
<img src="/2014/10/05/cocoapods/cocoapod.png" alt="cocoapod" title="cocoapod">
<a id="more"></a>
<p>CocoaPods应该是iOS最常用最有名的类库管理工具了，上述两个烦人的问题，通过cocoaPods，只需要一行命令就可以完全解决，当然前提是你必须正确设置它。重要的是，绝大部分有名的开源类库，都支持CocoaPods。所以，作为iOS程序员的我们，掌握CocoaPods的使用是必不可少的基本技能了。</p>
<h2 id="安装cocoaPods">安装cocoaPods</h2><p>在安装CocoaPods之前，首先要在本地安装好Ruby环境。但由于Mac系统已经自带Ruby环境，这个步骤不成问题。</p>
<p>接下来在终端输入</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem <span class="keyword">install</span> cocoapods</span><br></pre></td></tr></table></figure>
<p>在天朝，你懂的，在终端中敲入这个命令之后，会发现半天没有任何反应。原因无他，因为那堵墙阻挡了cocoapods.org。</p>
<p>但是，幸好，我们可以用淘宝的Ruby镜像来访问cocoapods。按照下面的顺序在终端中敲入依次敲入命令：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ gem sources --remove <span class="string">https:</span><span class="comment">//rubygems.org/ </span></span><br><span class="line"><span class="comment">//等有反应之后再敲入以下命令 </span></span><br><span class="line">$ gem sources -a <span class="string">http:</span><span class="comment">//ruby.taobao.org/</span></span><br></pre></td></tr></table></figure>
<p>为了验证你的Ruby镜像是并且仅是taobao，可以用以下命令查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gem sources <span class="operator">-l</span></span><br></pre></td></tr></table></figure>
<p>只有在终端中出现下面文字才表明你上面的命令是成功的：</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span> CURRENT SOURCES <span class="keyword">*</span><span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line">http://ruby.taobao.org/</span><br></pre></td></tr></table></figure>
<p>上面所有的命令完成之时，你再次在终端中运行：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gem <span class="keyword">install</span> cocoapods</span><br></pre></td></tr></table></figure>
<p>等上十几秒钟，CocoaPods就可以在你本地下载并且安装好了，不再需要其他设置。</p>
<h2 id="使用cocoaPods">使用cocoaPods</h2><p>使用CocoPods和安装它一样简单，也是通过一两行命令就可以搞定。</p>
<h4 id="场景1：利用CocoaPods，在项目中导入AFNetworking类库">场景1：利用CocoaPods，在项目中导入AFNetworking类库</h4><p>AFNetworking类库在GitHub地址是：<a href="https://github.com/AFNetworking/AFNetworking" target="_blank" rel="external">https://github.com/AFNetworking/AFNetworking</a></p>
<p>为了确定AFNetworking是否支持CocoaPods，可以用CocoaPods的搜索功能验证一下。在终端中输入：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>pod search <span class="constant">AFNetworking</span></span><br></pre></td></tr></table></figure>
<p>过几秒钟之后，你会在终端中看到关于AFNetworking类库的一些信息。</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">&gt; <span class="constant">AFNetworking</span> (<span class="number">3.0</span>.<span class="number">4</span>)</span><br><span class="line"></span>   A delightful iOS and OS X networking framework.</span><br><span class="line">   pod 'AFNetworking', '~&gt; 3.0.4'</span><br><span class="line">   -<span class="ruby"> <span class="constant">Homepage</span><span class="symbol">:</span> <span class="symbol">https:</span>/<span class="regexp">/github.com/</span><span class="constant">AFNetworking</span>/<span class="constant">AFNetworking</span></span><br><span class="line"></span>   -<span class="ruby"> <span class="constant">Source</span><span class="symbol">:</span>   <span class="symbol">https:</span>/<span class="regexp">/github.com/</span><span class="constant">AFNetworking</span>/<span class="constant">AFNetworking</span>.git</span><br><span class="line"></span>   -<span class="ruby"> <span class="constant">Versions</span><span class="symbol">:</span> <span class="number">3.0</span>.<span class="number">4</span>, <span class="number">3.0</span>.<span class="number">3</span>, <span class="number">3.0</span>.<span class="number">2</span>, <span class="number">3.0</span>.<span class="number">1</span>, <span class="number">3.0</span>.<span class="number">0</span>, <span class="number">3.0</span>.<span class="number">0</span>-beta.<span class="number">3</span>, <span class="number">3.0</span>.<span class="number">0</span>-beta.<span class="number">2</span>, <span class="number">3.0</span>.<span class="number">0</span>-beta.<span class="number">1</span>, <span class="number">2.6</span>.<span class="number">3</span>,</span><br><span class="line"></span>   2.6.2, 2.6.1, 2.6.0, 2.5.4, 2.5.3, 2.5.2, 2.5.1, 2.5.0, 2.4.1, 2.4.0, 2.3.1, 2.3.0, 2.2.4, 2.2.3,</span><br><span class="line">   2.2.2, 2.2.1, 2.2.0, 2.1.0, 2.0.3, 2.0.2, 2.0.1, 2.0.0, 2.0.0-RC3, 2.0.0-RC2, 2.0.0-RC1, 1.3.4,</span><br><span class="line">   1.3.3, 1.3.2, 1.3.1, 1.3.0, 1.2.1, 1.2.0, 1.1.0, 1.0.1, 1.0, 1.0RC3, 1.0RC2, 1.0RC1, 0.10.1,</span><br><span class="line">   0.10.0, 0.9.2, 0.9.1, 0.9.0, 0.7.0, 0.5.1 [master repo]</span><br><span class="line">   -<span class="ruby"> <span class="constant">Subspecs</span><span class="symbol">:</span></span><br><span class="line"></span>     -<span class="ruby"> <span class="constant">AFNetworking</span>/<span class="constant">Serialization</span> (<span class="number">3.0</span>.<span class="number">4</span>)</span><br><span class="line"></span>     -<span class="ruby"> <span class="constant">AFNetworking</span>/<span class="constant">Security</span> (<span class="number">3.0</span>.<span class="number">4</span>)</span><br><span class="line"></span>     -<span class="ruby"> <span class="constant">AFNetworking</span>/<span class="constant">Reachability</span> (<span class="number">3.0</span>.<span class="number">4</span>)</span><br><span class="line"></span>     -<span class="ruby"> <span class="constant">AFNetworking</span>/<span class="constant">NSURLSession</span> (<span class="number">3.0</span>.<span class="number">4</span>)</span><br><span class="line"></span>     -<span class="ruby"> <span class="constant">AFNetworking</span>/<span class="constant">UIKit</span> (<span class="number">3.0</span>.<span class="number">4</span>)</span></span><br></pre></td></tr></table></figure>
<p>我们在工程下先创建这个神奇的PodFile。在终端中进入（cd命令）你项目所在目录，然后在当前目录下，利用vim创建Podfile，运行：</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim Podfile  <span class="comment">// 其实个人觉得使用 pod init 会更方便</span></span><br></pre></td></tr></table></figure>
<p>然后在Podfile文件中输入以下文字：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, ‘<span class="number">7.0</span>’   <span class="comment"># 这句必须这么写标点符号必须是英文的，中文的不行</span></span><br><span class="line">pod <span class="string">'AFNetworking'</span>, <span class="string">'~&gt; 3.0.4'</span>  </span><br><span class="line"><span class="comment"># 这句话是在进行pod search AFNetworking之后作者建议的，</span></span><br><span class="line"><span class="comment"># 以后再添加库的时候就直接在后面写，但是不需要install，直接update就行</span></span><br></pre></td></tr></table></figure>
<p>保存退出：</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">:wq</span></span><br></pre></td></tr></table></figure>
<p>这时候，你会发现你的项目目录中，出现一个名字为<strong>Podfile</strong>的文件，而且文件内容就是你刚刚输入的内容。注意，Podfile文件应该和你的工程文件.xcodeproj在同一个目录下。</p>
<p>这时候，你就可以利用CocoPods下载AFNetworking类库了。还是在终端中的当前项目目录下，运行以下命令：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pod <span class="keyword">install</span></span><br></pre></td></tr></table></figure>
<p>运行上述命令之后，终端出现以下信息：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">EricmatoMacBook-Pro:CocoaPodsDemo ericwang$ pod <span class="operator"><span class="keyword">install</span></span><br><span class="line">Analyzing dependencies</span><br><span class="line">Downloading dependencies</span><br><span class="line">Installing AFNetworking (<span class="number">2.0</span><span class="number">.2</span>)</span><br><span class="line">Generating Pods <span class="keyword">project</span></span><br><span class="line">Integrating <span class="keyword">client</span> <span class="keyword">project</span></span><br><span class="line">[!] <span class="keyword">From</span> <span class="keyword">now</span> <span class="keyword">on</span> <span class="keyword">use</span> <span class="string">`CocoaPodsDemo.xcworkspace`</span>.</span></span><br></pre></td></tr></table></figure>
<p>注意最后一句话，意思是：以后打开项目就用 <code>CocoaPodsDemo.xcworkspace</code> 打开，而不是之前的.xcodeproj文件。</p>
<p>出现的.xcodeproj文件正是刚刚运行<code>$ pod install</code>命令产生的新文件。除了这个文件，你会发现还多了另外一个文件“Podfile.lock”和一个文件夹“Pods”。 </p>
<p>现在，你就可以开始使用AFNetworking.h啦。</p>
<h4 id="场景2：如何正确编译运行一个包含CocoPods类库的项目">场景2：如何正确编译运行一个包含CocoPods类库的项目</h4><p>你也许曾经遇到过（特别是新手iOS开发者）这种情况，好不容易在GitHub上找到一份代码符合自己想需求，兴冲冲下载下来，一编译，傻眼了，发现有各种各样错误。一看，原来是缺失了各种其他第三方类库。这时候莫慌，你再仔细一看，会发现你下载的代码包含了Podfile。没错，这意味着你可以用CocoaPods很方便下载所需要的类库。</p>
<p>UAAppReviewManager是一个能够让你方便地将提醒用户评分的功能加入你的应用中。当你去UAAppReviewManager的GitHub地址下载这份代码之后，打开Example工程（UAAppReviewManagerExample），编译，你会发现Xcode报告一大堆错误，基本都是说你编译的这份代码找不到某某头文件，这就意味着你要成功编译UAAppReviewManager的Example代码，必须先导入一些第三方类库。同时你会发现在UAAppReviewManagerExample文件夹下面有三个跟CocosPods相关的文件（文件夹）：<strong>Podfile</strong>，<strong>Podfile.lock</strong>和<strong>Pods</strong></p>
<p>这时候，打开终端，进入UAAppReviewManagerExample所在的目录，也就是和Podfile在同一目录下，和场景1一样，输入以下命令（由于已经有Podfile，所以不需要再创建Podfile）：</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>pod update</span><br></pre></td></tr></table></figure>
<p>过几秒（也许需要十几秒，取决于你的网络状况）之后，终端出现：</p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Analyzing dependencies</span><br><span class="line">Fetching podspec for <span class="escape">`U</span>AAppReviewManager<span class="escape">` </span>from <span class="escape">`.</span>./<span class="escape">`</span><br><span class="line"></span>Downloading dependencies</span><br><span class="line">Installing UAAppReviewManager (<span class="number">0.1</span>.<span class="number">6</span>)</span><br><span class="line">Generating Pods project</span><br><span class="line">Integrating client project</span><br><span class="line">[!] From now on use <span class="escape">`U</span>AAppReviewManagerExample.xcworkspace<span class="escape">`.</span></span><br></pre></td></tr></table></figure>
<p>这时候，再回到UAAppReviewManagerExample文件夹看一看，会看到多了一个文件<code>UAAppReviewManagerExample.xcworkspace：</code></p>
<p>根据终端的信息提示，你以后就需用新产生的UAAppReviewManagerExample.xcworkspace来运行这个Example代码了。</p>
<p>打开UAAppReviewManagerExample.xcworkspace，编译运行，成功！</p>
<p>注意，这里有个小问题，如果刚刚你不是输入<code>$ pod update</code>，而是输入<code>$ pod install</code>，会发现类库导入不成功，并且终端出现下面提示：</p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[!] Required version (UAAppReviewManager (from <span class="escape">`.</span>./<span class="escape">`)</span>) <span class="literal">not</span> found for <span class="escape">`U</span>AAppReviewManager<span class="escape">`.</span></span><br><span class="line"><span class="label">Available versions:</span> <span class="number">0.1</span>.<span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>这里的意思大概是Podfile文件过期，类库有升级，但是Podfile没有更改。</p>
<ul>
<li><p>$ pod install只会按照Podfile的要求来请求类库，如果类库版本号有变化，那么将获取失败。</p>
</li>
<li><p>但是 $ pod update会更新所有的类库，获取最新版本的类库。而且你会发现，如果用了 $ pod update，再用 $ pod install 就成功了。</p>
</li>
</ul>
<h2 id="参考文章">参考文章</h2><p><a href="https://guides.cocoapods.org/" target="_blank" rel="external">官网</a><br><a href="http://code4app.com/article/cocoapods-install-usage" target="_blank" rel="external">Code4App</a></p>

      
    </div>
    <footer class="article-footer">
      
          <p class="article-more-link">
            <a href="/2014/10/05/cocoapods/#more">阅读全文 -&gt;</a>
          </p>
      
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习/">学习</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/文档/">文档</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2014/11/06/how-to-use-wget/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Wget简单使用
        
      </div>
    </a>
  

  
  
</nav>

  
</article>
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/MVVM/" style="font-size: 10px;">MVVM</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/UITableView/" style="font-size: 12.5px;">UITableView</a> <a href="/tags/UI学习/" style="font-size: 12.5px;">UI学习</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/iOS9/" style="font-size: 10px;">iOS9</a> <a href="/tags/iOS开发/" style="font-size: 12.5px;">iOS开发</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/runtime/" style="font-size: 17.5px;">runtime</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/学习/" style="font-size: 20px;">学习</a> <a href="/tags/数据库/" style="font-size: 10px;">数据库</a> <a href="/tags/文档/" style="font-size: 10px;">文档</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  

  <div class="outer">
    
    <div id="footer-info" class="inner">
      All content copyright &copy; 2016 <a href="/"> Rocky </a> • All rights reserved.<br>
      使用 <a href="http://hexo.io/" target="_blank">Hexo</a>驱动 • 自定制主题
    </div>

  </div>

</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>